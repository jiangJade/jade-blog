(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{561:function(s,n,e){"use strict";e.r(n);var a=e(4),t=Object(a.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"_1-实现思路"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-实现思路"}},[s._v("#")]),s._v(" 1 实现思路")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[s._v("promise 有三个状态 分别为pending fulfilled rejected\nthen(succeed, fail) 先把成功、失败回调放到对象实例callbacks[]上\nresolve() 和 reject() 遍历callbacks\nresolve() 读取成功回调/reject() 读取失败回调（异步等待then 把回调放好）\n执行回调\n")])])])]),s._v(" "),e("h2",{attrs:{id:"话不多说上干货"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#话不多说上干货"}},[s._v("#")]),s._v(" 话不多说上干货")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("    class MyPromise {\n        state = \"pending\"\n        callbacks = []\n        consturctor(fn) {\n            if(typeof fn !== 'function'){\n                throw new Error('must pass function');\n            } \n            fn(this.resolve.bind(this), this.reject.bind(this))\n        }\n\n        resolve(result) {\n            if(this.state !== 'pending') return;\n            this.state = 'fulfilled'; // 将状态改成 完成\n            // 调用nextTick函数\n            nextTick(() => {\n                this.callbacks.forEach(item => {\n                    if(typeof item[0] === 'function') {\n                        item[0].call(undefined, result);\n                    }\n                })\n            })\n        }\n        reject(fill) {\n            if(this.state !== 'pending') return;\n            this.state = 'rejected';\n            this.callbacks.forEach(item => {\n                if(typeof item[1] === 'function') {\n                    item[1].call(undefined, fill);\n                }\n            })\n        }\n        then(succeed, fail) {\n            const handle = [];\n            if(typeof succeed === 'function') {\n                handle[0] = succeed;\n            }\n            if(typeof fail === 'function') {\n                handle[1] = fail;\n            }\n            this.callbacks.push(handle);\n        }\n    }\n\n    function nextTick(fn) {\n        if(process !== undefined && typeof process.nextTick === 'function') {\n            return process.nextTick(fn);\n        } else {\n            // 实现浏览器上的 nextTick\n            var counter = 1;\n            // 创建并返回一个新的 MutationObserver 它会在指定的DOM发生变化时被调用\n            var observer = new MutationObserver(fn);\n            // 创建观察的dom节点\n            var textNode = document.createTextNode(String(counter));\n            // 以上述配置开始观察目标节点\n            observer.observer(textNode, {\n                // 观察器的配置（需要观察什么变动）{ attributes: true, childList: true, subtree: true }\n                characterData: true // 监听文本内容的修改\n            });\n            counter += 1;\n            textNode.data = String(counter);\n        }\n    }\n\n    // 实例化\n    new MyPromise(function (resolve) {\n        console.log(resolve)\n    }).then(res => {\n        console.log(res, 222222)\n    })\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br"),e("span",{staticClass:"line-number"},[s._v("59")]),e("br"),e("span",{staticClass:"line-number"},[s._v("60")]),e("br"),e("span",{staticClass:"line-number"},[s._v("61")]),e("br"),e("span",{staticClass:"line-number"},[s._v("62")]),e("br"),e("span",{staticClass:"line-number"},[s._v("63")]),e("br"),e("span",{staticClass:"line-number"},[s._v("64")]),e("br"),e("span",{staticClass:"line-number"},[s._v("65")]),e("br"),e("span",{staticClass:"line-number"},[s._v("66")]),e("br"),e("span",{staticClass:"line-number"},[s._v("67")]),e("br"),e("span",{staticClass:"line-number"},[s._v("68")]),e("br"),e("span",{staticClass:"line-number"},[s._v("69")]),e("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);