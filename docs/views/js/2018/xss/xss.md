---
title: xss攻击
date: 2018-05-11
tags:
  - js
categories:
  - js
---

### xss 攻击是什么东东？

在 web 页面中插入一段恶意的 js 代码，当用户浏览界面时，会自动自动执行该代码。

简单插入 js 代码的方法是，将代码添加到扩展程序

### xss 类型

xss 一般分为三种

### 反射型

反射型 XSS 只是简单的把用户输入的数据“反射”给浏览器.也就是说需要诱使用户“点击”一个恶意链接，才能攻击成功。反射型 XSS 也叫作“非持久型 XSS”

### 存储型

存储型 XSS 会把用户输入的数据‘存储’在服务器端。当访问数据库数据时，从数据库取出数据，并由 HTML 显示，这时导致了 XSS 的产生。

比如黑客将恶意 js 脚本写在一个博客中，下次任何人访问这个博客，都会在他们的浏览器中执行这段恶意 js 脚本。导致‘Cookie 劫持’等。

### DOM Based XSS

实际上，这种类型的 XSS 并非按照“数据是否保存在服务器端”来划分的，从效果上来说也是反射型 XSS 单独划分出来的，因为 DOM Based XSS 的形成原因比较特别。这是由于客户端脚本自身解析不正确导致的安全问题。

### 修复方法

1. 对重要的 Cookie 字段使用 HTTPOnly 参数；
2. 检查所有用户可控输入。对所有的输入点进行严格的检查，过滤或拦截所有不符合当前语境的输入。由于无法预期所有可能的输出点语境，此种方法效果较差；
3. 检查所有用户输入的输出点。因为 XSS 最终攻击是发生在输出点，因此需要分析出用户输入数据的所有输出点的环境，是输入在 HTML 标签中，还是 HTML 属性、script 标签、事件、CSS 位置中，针对不同的输出位置，制定不同的转义或过滤规则；
4. 处理富文本。在文章、论坛等需要用到富文本的地方，需要特别注意富文本与 XSS 的区分，严格禁止所有的危险标签及“事件”，原则上应当使用白名单过滤标签、事件及属
